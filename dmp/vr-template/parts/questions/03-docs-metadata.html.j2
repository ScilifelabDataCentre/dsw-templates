<div id="q-docs-metadata" class="question">
  <h3>3. How will the material be documented and described?</h3>

  <div class="answer">
    {# Good provenance (lab notebooks) #}
    {%- set provenancePath = [uuids.documentationCUuid, uuids.provenanceQUuid]|reply_path -%}
    {%- set provenanceAUuid = repliesMap[provenancePath]|reply_str_value -%}
    {%- if provenanceAUuid == uuids.provenanceLabNotebooksAUuid -%}
      <p>We will use lab notebooks to make sure that there is good provenance of the data analysis.</p>
    {%- elif provenanceAUuid == uuids.provenanceELabNotebookAUuid -%}
      <p>We will use an electronic lab notebook to make sure that there is good provenance of the data analysis.</p>
    {%- elif provenanceAUuid == uuids.provenanceOtherAUuid -%}
      {%- set provenanceOtherPath = [provenancePath, uuids.provenanceOtherAUuid, uuids.provenanceOtherQUuid]|reply_path -%}
      {%- set provenanceOtherReply = repliesMap[provenanceOtherPath] -%}
      {%- set provenanceOther = provenanceOtherReply.value.value if provenanceOtherReply else "" -%}
      <p>We will use other solution than (electronic) lab notebooks to make sure that there is good provenance of the data analysis{{ ": " ~ provenanceOther|dot if provenanceOther else "." }}
    {%- endif -%}

    {# Documentation with metadata #}
    {# Metadata standards #}
    {%- set metadataStandardPath = [uuids.documentationCUuid, uuids.metadataStandardQUuid]|reply_path -%}
    {%- set metadataStandardAUuid = repliesMap[metadataStandardPath]|reply_str_value -%}
    {%- if metadataStandardAUuid == uuids.metadataStandardYesAUuid -%} {# verkar inte ens som att denna blir true #}
      {%- set metadataStandardWhichPath = [metadataStandardPath, uuids.metadataStandardYesAUuid, uuids.metadataStandardYesWhichQUuid]|reply_path -%}
      {%- set metadataStandardWhichCount = repliesMap[metadataStandardWhichPath]|reply_int_value -%}
      {%- if metadataStandardWhichCount > 0 -%}
        <p>We will use the following metadata standards to describe our datasets:</p>
        <ul>
        {%- for i in range(metadataStandardWhichCount) -%}
          <li>
          {%- set pathPrefix = [metadataStandardWhichPath, i]|reply_path -%}
          {%- set metadataStandardNamePath = [pathPrefix, uuids.metadataStandardYesWhichAUuid]|reply_path -%}
          {%- set metadataStandardNameReply = repliesMap[metadataStandardNamePath] -%}
          {%- if metadataStandardNameReply -%}
            {{ macros.integrationValue(metadataStandardNameReply, uuids.metadataStandardYesWhichAUuid) }}.
          {%- endif -%}
          </li>
        {%- endfor -%}
      </ul>
      {%- endif -%}
    {%- endif -%}

    {# Non-Metadata standards #}
    {%- set nMetadataStandardPath = [uuids.documentationCUuid, uuids.nonMetadataStandardQUuid]|reply_path -%}
    {%- set nMetadataStandardAUuid = repliesMap[nMetadataStandardPath]|reply_str_value -%}
    {%- if nMetadataStandardAUuid == uuids.nonMetadataStandardYesAUuid -%}
      {%- set nMetadataStandardWhichPath = [nMetadataStandardPath, uuids.nonMetadataStandardYesAUuid, uuids.nonMetadataStandardYesWhichQUuid]|reply_path -%}
      {%- set nMetadataStandardWhichAUuid = repliesMap[nMetadataStandardWhichPath]|reply_str_value -%}
      {%- if nMetadataStandardWhichAUuid -%}
        <p> In addition, the following metadata will be provided as documentation: {{ nMetadataStandardWhichAUuid }} </p>
      {%- endif -%}
    {%- endif -%}
  </div>
</div>
